<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>おみくじ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      background: #f3e6cf;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .shrine {
      text-align: center;
    }

    h1 {
      margin-top: 0;
      font-size: 1.4rem;
    }

    .sticks {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 30px;
    }

    .stick {
      width: 14px;
      height: 120px;
      background: linear-gradient(#e6c58f, #caa45a);
      border-radius: 6px;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .stick:hover {
      transform: translateY(-6px);
    }

    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }

    .overlay.show {
      opacity: 1;
      pointer-events: auto;
    }

    .result-card {
      background: #fffaf0;
      padding: 32px 20px 24px;
      border-radius: 6px;
      width: 300px;
      max-height: 90vh;
      overflow-y: auto;
      text-align: center;
      box-shadow: 0 12px 30px rgba(0,0,0,0.3);
      position: relative;
      animation: zoom 0.35s ease;
    }

    .result-card::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 18px;
      background: repeating-linear-gradient(
        45deg,
        #ddd,
        #ddd 4px,
        #f5f5f5 4px,
        #f5f5f5 8px
      );
    }

    @keyframes zoom {
      from { transform: scale(0.7); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .result-title {
      font-size: 1.8rem;
      font-weight: bold;
      margin-bottom: 12px;
    }

    .paper-content {
      writing-mode: vertical-rl;
      text-align: left;
      font-size: 0.9rem;
      line-height: 1.6;
      margin-bottom: 16px;
    }

    .section {
      margin-bottom: 12px;
    }

    .label {
      font-weight: bold;
    }

    button {
      background: #444;
      color: #fff;
      border: none;
      border-radius: 999px;
      padding: 8px 16px;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <div class="shrine">
    <h1>おみくじを1本選んでください</h1>
    <div class="sticks" id="sticks"></div>
  </div>

  <div class="overlay" id="overlay">
    <div class="result-card">
      <div class="result-title" id="result"></div>
      <div class="paper-content" id="detail">生成中…</div>
      <button onclick="closeResult()">戻る</button>
    </div>
  </div>

  <script>
    // おみくじの種類
    const omikuji = ["大吉", "中吉", "小吉", "吉", "末吉", "凶"];

    // 運勢ごとのメッセージ
    const messages = {
      "大吉": [
        "今日は何をやっても追い風が吹く日です。",
        "迷っているなら進んで正解。",
        "小さな挑戦が大きな結果につながります。",
        "新しいことにチャレンジすると吉。",
        "笑顔で過ごすと運気上昇。"
      ],
      "中吉": [
        "焦らず進めば道は自然と開けます。",
        "人との会話にヒントがあります。",
        "少し勇気を出すと吉。",
        "計画を見直すとチャンスが見つかります。"
      ],
      "小吉": [
        "悪くはないですが油断は禁物。",
        "一歩引いて周りを見ると吉。",
        "地道な努力が後で実を結びます。",
        "身近な人との関係に気を配ると吉。"
      ],
      "吉": [
        "平穏な一日。積み重ねが大事です。",
        "小さな幸せを大切に。",
        "焦らず普段通りで吉。"
      ],
      "末吉": [
        "すぐの結果は出ませんが、後で効いてきます。",
        "じっくり取り組むと良い日。"
      ],
      "凶": [
        "無理をしないことが最大の吉。",
        "今日は守りに入るのが正解。",
        "慎重に行動すると後悔が少ない日。",
        "焦らず体調や心を大切に。"
      ]
    };

    // おみくじを引いたときの表示
    function drawOmikuji() {
      const result = omikuji[Math.floor(Math.random() * omikuji.length)];
      const list = messages[result];
      const detail = list[Math.floor(Math.random() * list.length)];

      document.getElementById("result").textContent = result;
      document.getElementById("detail").innerHTML =
        `<div class="section">${detail}</div>`;

      document.getElementById("overlay").classList.add("show");
    }

    function closeResult() {
      document.getElementById("overlay").classList.remove("show");
    }

    // おみくじ棒の生成
    const sticks = document.getElementById("sticks");
    for (let i = 0; i < 10; i++) {
      const stick = document.createElement("div");
      stick.className = "stick";
      stick.onclick = drawOmikuji;
      sticks.appendChild(stick);
    }
  </script>
</body>
</html>
